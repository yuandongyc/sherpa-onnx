# 添加视频扫描和 JSON 配置生成功能（分两步）

## 功能说明
**步骤1**: 扫描 input 文件夹，生成 JSON 配置文件供用户检查
**步骤2**: 用户确认后，根据 JSON 配置文件进行批量转换

## 实施步骤

### 1. 扩展 TypeScript 接口定义
在 `converter.ts` 中添加新的接口：
```typescript
export interface VideoFile {
  path: string;
  name: string;
  category: string;
  extension: string;
}

export interface VideoListConfig {
  videos: VideoFile[];
  totalCount: number;
  generatedAt: string;
}
```

### 2. 添加扫描功能（仅生成 JSON）
在 `VideoConverter` 类中添加方法：
```typescript
scanInputDirectory(inputDir: string, outputFile?: string): VideoListConfig
```
功能：
- 递归扫描 input 目录
- 过滤视频文件（.mp4, .avi, .mkv, .mov 等）
- 提取文件信息和分类
- 生成 JSON 配置文件到指定路径（默认：output/video-list.json）

### 3. 添加批量转换功能
在 `VideoConverter` 类中添加方法：
```typescript
convertVideosFromConfig(configPath: string): ConversionResult[]
```
功能：
- 读取 JSON 配置文件
- 遍历视频列表
- 逐个进行转换
- 返回所有转换结果

### 4. 更新导出接口
在 `index.ts` 中导出新的接口和功能

### 5. 更新文档
- 更新 README.md 和 README_CN.md
- 添加扫描和批量转换功能的说明

## 使用流程

**步骤1 - 生成配置文件**：
```javascript
const converter = new VideoConverter(config);
const videoList = converter.scanInputDirectory('input', 'output/video-list.json');
console.log(`Found ${videoList.totalCount} videos`);
```

**步骤2 - 用户检查 JSON 文件后进行批量转换**：
```javascript
const results = converter.convertVideosFromConfig('output/video-list.json');
console.log(`Converted ${results.length} videos`);
```

## JSON 输出格式示例
```json
{
  "videos": [
    {
      "path": "input/New-Concept/video2.mp4",
      "name": "video2",
      "category": "New-Concept",
      "extension": ".mp4"
    }
  ],
  "totalCount": 3,
  "generatedAt": "2026-02-06T19:50:00.000Z"
}
```